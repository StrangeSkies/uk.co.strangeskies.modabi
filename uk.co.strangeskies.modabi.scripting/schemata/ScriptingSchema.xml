<?xml version="1.0" ?>
<schema
	xmlns="http://modabi.strangeskies.co.uk/2014-01-01/"
	name="ScriptingSchema">

	<imports>
		uk.co.strangeskies.reflection.TypeToken.Infer,
		javax.script.ScriptEngineManager,
		javax.script.ScriptEngine
	</imports>

	<dependencies>
		BaseSchema
	</dependencies>

	<types />

	<models>
		<model
			name="scriptObject"
			dataType="@uk.co.strangeskies.reflection.TypeToken.Infer ?"
			bindingType="javax.script.ScriptEngineManager"
			extensible="true">

			<choice
				name="scriptSource"
				postInputType="javax.script.Invocable">

				<sequence name="direct">
					<property
						name="language"
						type="string"
						outMethod="null"
						inMethod="getEngineByName"
						inMethodChained="true" />

					<content
						name="script"
						type="string"
						outMethod="null"
						inMethod="eval"
						inMethodChained="true"
						postInputType="javax.script.Invocable"
						inMethodCast="true" />
				</sequence>

				<!-- sequence name="resource">
					<property
						name="source"
						type="string" />

					<property
						name="language"
						type="string"
						optional="true" />
				</sequence -->
			</choice>

			<choice name="scriptObject">
				<!-- inputSequence inMethod="getInterface">
					<property
						name="objectName"
						type="string" />

					<property
						name="objectClass"
						type="class" />
				</inputSequence -->

				<property
					name="objectClass"
					type="class"
					outMethod="null"
					inMethod="getInterface"
					inMethodChained="true" />
			</choice>
		</model>
	</models>
</schema>
