<?xml version="1.1"?>
<modelSchema>

	<types>
		<type id="integerRange" dataClass="java.lang.Integer"></type>
	</types>

	<models>
		<model id="include">
			<data inMethod="" />
		</model>

		<model id="type" bindingClass="uk.co.strangeskies.modabi.schema.node.data.DataType">
			<property id="id" />
			<property id="dataClass" type="class" />
			<choice>

			</choice>
		</model>

		<model id="node" bindingClass="uk.co.strangeskies.modabi.schema.node.SchemaNode"
			abstract="true" />

		<model id="input" model="node"
			bindingClass="uk.co.strangeskies.modabi.schema.node.InputNode">
			<property id="inMethod" optional="true" />
		</model>

		<model id="output" model="node"
			bindingClass="uk.co.strangeskies.modabi.schema.node.OutputNode">
			<property id="outMethod" optional="true" />
			<property id="iterable" type="boolean" optional="true" />
		</model>

		<model id="branch" model="node"
			bindingClass="uk.co.strangeskies.modabi.schema.node.BranchingNode">
			<binding id="child" inMethod="addChild" model="node" occurences="0.." />
		</model>

		<model id="choice" model="branch, input"
			bindingClass="uk.co.strangeskies.modabi.schema.node.ChoiceNode"
			builderClass="uk.co.strangeskies.modabi.schema.node.builder.ChoiceNodeBuilder"
			abstract="false">
			<property id="mandatory" type="boolean" />
			<binding id="child" occurences="2.." />
		</model>

		<model id="sequence" model="branch, input"
			bindingClass="uk.co.strangeskies.modabi.schema.node.SequenceNode"
			builderClass="uk.co.strangeskies.modabi.schema.node.builder.SequenceNodeBuilder"
			abstract="false">
		</model>

		<model id="model" model="branch"
			bindingClass="uk.co.strangeskies.modabi.schema.node.BindingNode"
			builderClass="uk.co.strangeskies.modabi.schema.node.builder.BindingNodeBuilder">
			<property id="id" />
			<property id="abstract" type="boolean" />
			<property id="base" type="reference" optional="true" />
			<property id="bindingClass" type="class" optional="true" />
			<choice>
				<sequence />
				<sequence>
					<property id="factoryClass" type="class" />
					<property id="factoryMethod" optional="true" />
				</sequence>
			</choice>
		</model>

		<model id="binding" model="model, input, output" abstract="false"
			bindingClass="uk.co.strangeskies.modabi.schema.node.BindingNode"
			builderClass="uk.co.strangeskies.modabi.schema.node.builder.BindingNodeBuilder">
			<property id="occurances" type="integerRange" optional="true" />
		</model>

		<model id="data" model="node, input" abstract="false"
			bindingClass="uk.co.strangeskies.modabi.schema.node.DataNode"
			factoryClass="uk.co.strangeskies.modabi.schema.node.builder.DataNodeBuilder">
			<property id="type" />
			<property id="optional" optional="true" type="boolean" />
			<data optional="true" />
		</model>

		<model id="property" model="data"
			bindingClass="uk.co.strangeskies.modabi.schema.node.PropertyNode"
			factoryClass="uk.co.strangeskies.modabi.schema.node.builder.PropertyNodeBuilder">
			<property id="id" />
		</model>
	</models>

	<root id="modelSchema" bindingClass="uk.co.strangeskies.modabi.schema.SchemaGraph"
		factoryClass="uk.co.strangeskies.modabi.schema.SchemaGraphBuilder">
		<element id="includes" occurences="0..1">
			<element model="include" occurences="0.." />
		</element>

		<element id="types" occurences="0..1">
			<element id="type" model="type" occurences="0.." outIterator="getTypes" />
		</element>

		<element id="models" occurences="0..1">
			<element id="model" model="model" occurences="0.." />
		</element>

		<element id="root" model="model" occurences="0..1" />
	</root>

</modelSchema>
