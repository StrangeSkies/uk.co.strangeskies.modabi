<?xml version="1.1"?>
<modelSchema>

	<types>
		<type name="integerRange"></type>
	</types>

	<models>
		<model name="include">
			<data inMethod="" />
		</model>

		<model name="type">
			<property name="name" />

			<property name="dataClass"
				class="uk.co.strangeskies.modabi.schema.node.data.SchemaDataType" />

			<choice>

			</choice>
		</model>

		<model name="node" class="uk.co.strangeskies.modabi.schema.node.SchemaNode" />

		<model name="branch" model="node" abstract="true"
			class="uk.co.strangeskies.modabi.schema.node.BranchingSchemaNode"
			factoryClass="uk.co.strangeskies.modabi.schema.node.builder.BranchingSchemaNodeBuilder">
			<any name="children" inMethod="addChild" model="node" occurences="1.." />

			<property name="choice" type="boolean" />

			<property name="inMethod" />
		</model>

		<model name="choice" model="branch">
			<property name="choice">true</property>
		</model>

		<model name="sequence" model="branch">
			<property name="choice">false</property>

			<any name="children" occurences="0.." />
		</model>

		<model name="element" model="sequence"
			class="uk.co.strangeskies.modabi.schema.node.ElementSchemaNode"
			factoryClass="uk.co.strangeskies.modabi.schema.node.builder.ElementSchemaNodeBuilder">
			<property name="name" />

			<property name="base" type="reference" optional="true" />

			<property name="occurances" type="integerRange" optional="true" />

			<property name="dataClass" type="class" optional="true" />

			<property name="outMethod" optional="true" />

			<property name="iterable" type="boolean" optional="true" />

			<choice>
				<sequence />

				<sequence>
					<property name="factoryClass" type="class" />

					<property name="factoryMethod" optional="true" />
				</sequence>
			</choice>
		</model>

		<model name="model" model="element"></model>

		<model name="data" model="node"
			class="uk.co.strangeskies.modabi.schema.node.DataSchemaNode" factoryClass="uk.co.strangeskies.modabi.schema.node.builder.DataSchemaNodeBuilder">
			<property name="type" />

			<property name="optional" optional="true" type="boolean" />

			<data optional="true" />
		</model>

		<model name="property" model="data"
			class="uk.co.strangeskies.modabi.schema.node.PropertySchemaNode"
			factoryClass="uk.co.strangeskies.modabi.schema.node.builder.PropertySchemaNodeBuilder">
			<property name="name" />
		</model>
	</models>

	<root name="modelSchema" class="uk.co.strangeskies.modabi.schema.SchemaGraph"
		factoryClass="uk.co.strangeskies.modabi.schema.SchemaGraphBuilder">
		<element name="includes" occurences="0..1">
			<element model="include" occurences="0.." />
		</element>

		<element name="types" occurences="0..1">
			<element name="type" model="type" occurences="0.." outIterator="getTypes" />
		</element>

		<element name="models" occurences="0..1">
			<element name="model" model="element" occurences="0.." />
		</element>

		<element name="root" model="element" occurences="0..1" />
	</root>

</modelSchema>
